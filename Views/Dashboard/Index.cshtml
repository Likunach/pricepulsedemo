@model PricePulse.ViewModels.DashboardViewModel
@{
    ViewData["Title"] = "PricePulse Dashboard";
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>@ViewData["Title"]</title>
    <link href="data:image/x-icon;base64," rel="icon" type="image/x-icon"/>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com" rel="preconnect"/>
    <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700;900&amp;display=swap" rel="stylesheet"/>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        "primary": "#4b1f71",
                        "accent-orange": "#f94037",
                        "accent-blue": "#0cb8ca",
                        "background-light": "#eff9f2",
                        "foreground-light": "#111827",
                        "subtle-light": "#e5e7eb",
                        "card-light": "#ffffff",
                    },
                    fontFamily: {
                        "display": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.75rem",
                        "lg": "1rem",
                        "xl": "1.25rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
    <style>
        .group:hover .group-hover-block {
            display: block;
        }
    </style>
</head>
<body class="font-display bg-background-light text-foreground-light">
    <div class="relative flex min-h-screen w-full flex-col">
        <header class="sticky top-0 z-50 flex items-center justify-between whitespace-nowrap border-b border-subtle-light bg-background-light/90 backdrop-blur-sm px-4 sm:px-6 lg:px-10 py-4">
            <div class="flex items-center gap-3">
                <div class="flex items-center justify-center w-10 h-10 rounded-full bg-primary text-white">
                    <svg class="w-6 h-6" fill="none" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                        <path clip-rule="evenodd" d="M24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4ZM22 14V22H14V26H22V34H26V26H34V22H26V14H22Z" fill="currentColor" fill-rule="evenodd"></path>
                    </svg>
                </div>
                <h1 class="text-2xl font-black tracking-tighter text-primary">PricePulse</h1>
            </div>
            <nav class="hidden md:flex items-center gap-2">
                <a class="text-sm font-bold text-primary px-4 py-2 rounded-full bg-primary/10 transition-colors" href="@Url.Action("Index", "Dashboard")">Dashboard</a>
                <a class="text-sm font-medium text-foreground-light/70 hover:text-primary transition-colors px-4 py-2" href="@Url.Action("Index", "ProductDiscovery")">Products</a>
                <a class="text-sm font-medium text-foreground-light/70 hover:text-primary transition-colors px-4 py-2" href="@Url.Action("Companies", "Account")">Companies</a>
                <a class="text-sm font-medium text-foreground-light/70 hover:text-primary transition-colors px-4 py-2" href="@Url.Action("Index", "ProductDiscovery")">Alerts</a>
                <a class="text-sm font-medium text-foreground-light/70 hover:text-primary transition-colors px-4 py-2" href="@Url.Action("Info", "Account")">
                    <span class="material-symbols-outlined">person</span>
                    Account
                </a>
            </nav>
            <div class="flex items-center gap-4">
                <button class="flex items-center justify-center rounded-full h-10 w-10 bg-subtle-light/80 hover:bg-primary/20 text-foreground-light transition-colors">
                    <svg fill="currentColor" height="20px" viewBox="0 0 256 256" width="20px" xmlns="http://www.w3.org/2000/svg">
                        <path d="M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"></path>
                    </svg>
                </button>
                <div class="relative group">
                    <button class="flex items-center gap-2">
                        <div class="bg-center bg-no-repeat aspect-square bg-cover rounded-full h-10 w-10 border-2 border-accent-blue" style='background-image: url("https://lh3.googleusercontent.com/aida-public/AB6AXuBqhN_RYadwmRvmcpWUue4BRa9yDT8st7yPnonOa2DWbBJcdADJKk6ZnV2hI61LBSxHiH2FCK1nlRb4xlsCiRCLqoyScIGSVTc7XcEP6MFsfnRu785SjY-5Qfpz4u2JFcWbkF7oBjMQpBwsPFFvB4fbIOi1CsBddYX_SXjFC89wo7n5pAoNKjPvye0epbV6ewBFP4FXN17Flr-Rn86eKdax1b9KtZ0CXKhlqpZgyQoJh8m4j7z80BtBJ_JWDttZOMijOxz7zveyzA");'></div>
                    </button>
                    <div class="group-hover-block hidden absolute right-0 mt-2 w-48 bg-card-light rounded-lg shadow-lg py-1 border border-subtle-light">
                        <a class="block px-4 py-2 text-sm text-foreground-light hover:bg-subtle-light" href="@Url.Action("Info", "Account")">My Profile</a>
                        <a class="block px-4 py-2 text-sm text-foreground-light hover:bg-subtle-light" href="@Url.Action("Info", "Account")">
                            <span class="material-symbols-outlined">person</span>
                            Account
                        </a>
                        <div class="border-t border-subtle-light my-1"></div>
                        <a class="block px-4 py-2 text-sm text-accent-orange hover:bg-subtle-light" href="@Url.Action("Logout", "Account")">Logout</a>
                    </div>
                </div>
            </div>
        </header>
        
        <main class="flex-1 container mx-auto px-4 sm:px-6 lg:px-8 py-10">
            <div class="flex flex-col gap-10">
                <h2 class="text-4xl font-black tracking-tighter">Dashboard</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <div class="bg-card-light rounded-xl p-6 border border-subtle-light shadow-sm transition-all hover:shadow-lg hover:-translate-y-1">
                        <p class="text-sm font-medium text-foreground-light/60">Total Products Tracked</p>
                        <p class="text-4xl font-black text-primary mt-2">@Model.TotalProductsTracked</p>
                        <p class="text-sm font-medium text-green-500 mt-1">+10% from last month</p>
                    </div>
                    <div class="bg-card-light rounded-xl p-6 border border-subtle-light shadow-sm transition-all hover:shadow-lg hover:-translate-y-1">
                        <p class="text-sm font-medium text-foreground-light/60">Active Alerts</p>
                        <p class="text-4xl font-black text-accent-orange mt-2">@Model.ActiveAlerts</p>
                        <p class="text-sm font-medium text-accent-orange mt-1">-2% from last month</p>
                    </div>
                    <div class="bg-card-light rounded-xl p-6 border border-subtle-light shadow-sm transition-all hover:shadow-lg hover:-translate-y-1">
                        <p class="text-sm font-medium text-foreground-light/60">Average Price Change</p>
                        <p class="text-4xl font-black text-accent-blue mt-2">@Model.AveragePriceChange.ToString("F1")%</p>
                        <p class="text-sm font-medium text-accent-orange mt-1">-1.5% from last month</p>
                    </div>
                </div>
                
                <div class="flex flex-col gap-6">
                    <h3 class="text-2xl font-bold tracking-tight">Recent Price Changes</h3>
                    <div class="overflow-x-auto bg-card-light rounded-xl border border-subtle-light shadow-sm">
                        <table class="min-w-full divide-y divide-subtle-light">
                            <thead class="bg-subtle-light/40">
                                <tr>
                                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-foreground-light/70" scope="col">Product</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-foreground-light/70" scope="col">Current Price</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-foreground-light/70" scope="col">Previous Price</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-foreground-light/70" scope="col">Change</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-foreground-light/70" scope="col">Date</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-subtle-light">
                                @foreach (var change in Model.RecentPriceChanges)
                                {
                                    <tr class="hover:bg-subtle-light/30">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-foreground-light">@change.ProductName</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-foreground-light/90">$@change.CurrentPrice.ToString("F2")</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-foreground-light/60 line-through">$@change.PreviousPrice.ToString("F2")</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-bold text-accent-orange">$@change.PriceDifference.ToString("F2")</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-foreground-light/60">@change.ChangeDate.ToString("yyyy-MM-dd")</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="flex flex-col gap-6">
                    <h3 class="text-2xl font-bold tracking-tight">Price Alerts</h3>
                    <div class="overflow-x-auto bg-card-light rounded-xl border border-subtle-light shadow-sm">
                        <table class="min-w-full divide-y divide-subtle-light">
                            <thead class="bg-subtle-light/40">
                                <tr>
                                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-foreground-light/70" scope="col">Product</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-foreground-light/70" scope="col">Target Price</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-foreground-light/70" scope="col">Current Price</th>
                                    <th class="px-6 py-4 text-left text-xs font-semibold uppercase tracking-wider text-foreground-light/70" scope="col">Status</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-subtle-light">
                                @foreach (var alert in Model.PriceAlerts)
                                {
                                    <tr class="hover:bg-subtle-light/30">
                                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-foreground-light">@alert.ProductName</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-foreground-light/90">$@alert.TargetPrice.ToString("F2")</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm text-foreground-light/90">$@alert.CurrentPrice.ToString("F2")</td>
                                        <td class="px-6 py-4 whitespace-nowrap text-sm">
                                            <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-accent-blue text-white">@alert.Status</span>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </main>
        
        <footer class="bg-background-light mt-16">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="border-t border-subtle-light pt-8 flex flex-col md:flex-row justify-between items-center gap-6">
                    <div class="flex flex-col sm:flex-row items-center gap-6 text-center sm:text-left">
                        <p class="text-sm text-foreground-light/60">Â© 2024 PricePulse. All rights reserved.</p>
                        <nav class="flex gap-6">
                            <a class="text-sm text-foreground-light/80 hover:text-primary transition-colors" href="@Url.Action("Index", "Home")">Privacy Policy</a>
                            <a class="text-sm text-foreground-light/80 hover:text-primary transition-colors" href="@Url.Action("Index", "Home")">Terms of Service</a>
                        </nav>
                    </div>
                    <div class="flex gap-4">
                        <a class="text-foreground-light/60 hover:text-primary transition-colors" href="@Url.Action("Index", "Home")">
                            <svg fill="currentColor" height="24px" viewBox="0 0 256 256" width="24px" xmlns="http://www.w3.org/2000/svg">
                                <path d="M247.39,68.94A8,8,0,0,0,240,64H209.57A48.66,48.66,0,0,0,168.1,40a46.91,46.91,0,0,0-33.75,13.7A47.9,47.9,0,0,0,120,88v6.09C79.74,83.47,46.81,50.72,46.46,50.37a8,8,0,0,0-13.65,4.92c-4.31,47.79,9.57,79.77,22,98.18a110.93,110.93,0,0,0,21.88,24.2c-15.23,17.53-39.21,26.74-39.47,26.84a8,8,0,0,0-3.85,11.93c.75,1.12,3.75,5.05,11.08,8.72C53.51,229.7,65.48,232,80,232c70.67,0,129.72-54.42,135.75-124.44l29.91-29.9A8,8,0,0,0,247.39,68.94Zm-45,29.41a8,8,0,0,0-2.32,5.14C196,166.58,143.28,216,80,216c-10.56,0-18-1.4-23.22-3.08,11.51-6.25,27.56-17,37.88-32.48A8,8,0,0,0,92,169.08c-.47-.27-43.91-26.34-44-96,16,13,45.25,33.17,78.67,38.79A8,8,0,0,0,136,104V88a32,32,0,0,1,9.6-22.92A30.94,30.94,0,0,1,167.9,56c12.66.16,24.49,7.88,29.44,19.21A8,8,0,0,0,204.67,80h16Z"></path>
                            </svg>
                        </a>
                        <a class="text-foreground-light/60 hover:text-primary transition-colors" href="@Url.Action("Index", "Home")">
                            <svg fill="currentColor" height="24px" viewBox="0 0 256 256" width="24px" xmlns="http://www.w3.org/2000/svg">
                                <path d="M128,24A104,104,0,1,0,232,128,104.11,104.11,0,0,0,128,24Zm8,191.63V152h24a8,8,0,0,0,0-16H136V112a16,16,0,0,1,16-16h16a8,8,0,0,0,0-16H152a32,32,0,0,0-32,32v24H96a8,8,0,0,0,0,16h24v63.63a88,88,0,1,1,16,0Z"></path>
                            </svg>
                        </a>
                        <a class="text-foreground-light/60 hover:text-primary transition-colors" href="@Url.Action("Index", "Home")">
                            <svg fill="currentColor" height="24px" viewBox="0 0 256 256" width="24px" xmlns="http://www.w3.org/2000/svg">
                                <path d="M128,80a48,48,0,1,0,48,48A48.05,48.05,0,0,0,128,80Zm0,80a32,32,0,1,1,32-32A32,32,0,0,1,128,160ZM176,24H80A56.06,56.06,0,0,0,24,80v96a56.06,56.06,0,0,0,56,56h96a56.06,56.06,0,0,0,56-56V80A56.06,56.06,0,0,0,176,24Zm40,152a40,40,0,0,1-40,40H80a40,40,0,0,1-40-40V80A40,40,0,0,1,80,40h96a40,40,0,0,1,40,40ZM192,76a12,12,0,1,1-12-12A12,12,0,0,1,192,76Z"></path>
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </footer>
    </div>
</body>
</html>
